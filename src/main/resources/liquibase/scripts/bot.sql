--liquibase formatted sql

-- changeset GlakovaA:1
CREATE TABLE IF NOT EXISTS client_registration
(
    id                      BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id                 BIGINT  NOT NULL,
    name                    TEXT NOT NULL,
    please_of_residence     TEXT NOT NULL,
    mobile_number           TEXT NOT NULL
);
-- changeset GlakovaA:2
CREATE TABLE volunteers
(
    id          BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name        TEXT NOT NULL,
    please_of_residence     TEXT NOT NULL

);

-- changeset GlakovaA:3
CREATE INDEX client_registration_name_index ON volunteers (name);

-- changeset GlakovaA:4
ALTER TABLE client_registration add column volunteer_id  BIGINT REFERENCES volunteers (id);

-- changeset GlakovaA:5
CREATE TABLE report
(
    id                              BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    picture                         VARCHAR NOT NULL,
    diet                            TEXT NOT NULL,
    well_being_and_addiction        TEXT NOT NULL,
    changeInBehavior                TEXT NOT NULL
);

-- changeset AlexSnegireff:6
CREATE TABLE users
(
    chat_id BIGINT PRIMARY KEY ,
    user_name TEXT,
    mobile_number TEXT,
    last_command TEXT,
    volunteer_trigger BOOLEAN
);

-- changeset AlexSnegireff:7
drop table client_registration;
DROP table report;
drop table volunteers;

-- changeset AlexSnegireff:8
drop table users;
CREATE TABLE users_for_dog
(
    chat_id BIGINT PRIMARY KEY ,
    user_name TEXT,
    mobile_number TEXT,
    last_command TEXT,
    volunteer_trigger BOOLEAN
);

-- changeset AlexSnegireff:9
CREATE TABLE users_for_cat
(
    chat_id BIGINT PRIMARY KEY ,
    user_name TEXT,
    mobile_number TEXT,
    last_command TEXT,
    volunteer_trigger BOOLEAN
);

--changeset AlexSnegireff:10
CREATE TABLE reports
(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    picture bytea,
    diet TEXT,
    well_being_and_addiction TEXT,
    changeInBehavior TEXT,
    user_id BIGINT,
    volunteer_id BIGINT,
    status TEXT
);

--changeset AlexSnegireff:11
ALTER TABLE reports
   RENAME COLUMN changeInBehavior to change_in_behavior;

--changeset AlexSnegireff:12
CREATE TABLE volunteers
(
    chat_id BIGINT PRIMARY KEY ,
    user_name TEXT,
    chat_id_user BIGINT,
    status TEXT
)






